<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- <script src="https://cdn.tailwindcss.com"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/echarts@latest/dist/echarts.min.js"></script>
  <!-- <script src="https://cdn.jsdelivr.net/npm/alpinejs"></script> -->
  <link rel="stylesheet" href="../src/css/style.css" />

  <!-- <script src="https://fastly.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script> -->

  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://cdn.socket.io/4.0.1/socket.io.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs"></script>
  <script src="https://cdn.jsdelivr.net/npm/@alpinejs/persist"></script>

  <title>Live Dashboard</title>
</head>

<body
  x-data="{ page: 'profile', 'loaded': true, 'darkMode': true, 'stickyMenu': false, 'sidebarToggle': false, 'scrollTop': false, logEntry: 'The Performance of the Server is 90%', 'logs': false, 'health': false, 'performance': false, 'security': false }"
  x-init="
          darkMode = JSON.parse(localStorage.getItem('darkMode'));
          $watch('darkMode', value => localStorage.setItem('darkMode', JSON.stringify(value)))"
  :class="{'dark text-bodydark bg-boxdark-2': darkMode === true}">
  <!-- ===== Preloader Start ===== -->
  <include src="./partials/preloader.html"></include>
  <!-- ===== Preloader End ===== -->

  <!-- ===== Page Wrapper Start ===== -->
  <div class="flex h-screen overflow-hidden">
    <!-- ===== Sidebar Start ===== -->
    <include src="./partials/sidebar.html"></include>
    <!-- ===== Sidebar End ===== -->

    <!-- ===== Content Area Start ===== -->
    <div class="relative flex flex-1 flex-col overflow-y-auto overflow-x-hidden">
      <!-- ===== Header Start ===== -->
      <include src="./partials/header.html" />
      <!-- ===== Header End ===== -->

      <!-- ===== Main Content Start ===== -->
      <main class="align-center flex w-full flex-col">
        <!-- <div class="w-full">
            <h1 class="pl-3 py-4 text-2xl font-semibold bg-gray-700">Navbar</h1>
          </div> -->
        <div class=" h-full w-full flex m-5">
          <!-- first -->
          <div class="flex flex-col w-[40%] ">
            <!-- <h1 class="text-white ml-4 mt-4 font-black text-5xl">Logs</h1> -->
            <div class="p-4 ml-4 mt-4 w-[85%] rounded-sm border border-stroke bg-white py-6 px-7.5 shadow-default dark:border-strokedark dark:bg-boxdark mass-shadow">
              <p class="text-black dark:text-white"><span class="font-bold">Server :</span> Server ABC</p>
            </div>
            <div
              class="p-4 ml-4 mt-4 w-[85%] content-center rounded-sm border border-stroke bg-white py-6 px-7.5 shadow-default dark:border-strokedark dark:bg-boxdark text-center" style="
              box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px,
                rgba(0, 0, 0, 0.22) 0px 15px 12px;
            ">
              <div id="statusIndicator"
                class="bg-red-status ml-[20%] rounded-xl mt-2 w-[60%] p-2 text-center">
                <p id="statusText" class=" py-[20%] font-black text-2xl">OFF</p>
              </div>
              <p class="text-black dark:text-white">Last Online : 06-Dec-2023 16:05</p>
              <div class="mt-[10%] flex ">
                <div class="p-5 items-center rounded-sm w-[50%] flex flex-col" style="box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px, rgba(0, 0, 0, 0.3) 0px 7px 13px -3px, rgba(0, 0, 0, 0.2) 0px -3px 0px inset;">
                  <p class="text-black dark:text-white">Requests</p>
                  <!-- <h1 id="requestCount" class="text-green-status font-extrabold text-4xl">2000</h1> -->
                  <h1 id="dataValue" class="text-green-status font-extrabold text-4xl"></h1>
                </div>
                <div class="p-5 ml-5  items-center rounded-sm w-[50%] flex flex-col" style="box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px, rgba(0, 0, 0, 0.3) 0px 7px 13px -3px, rgba(0, 0, 0, 0.2) 0px -3px 0px inset;">
                  <p class="text-black dark:text-white">Dummy</p>
                </div>
              </div>
            </div>
            <!-- <div class="dark:bg-meta-4 p-4 ml-4 mt-4 border border-gray-700 w-[85%] rounded-md text-center content-center">
                    <p class="text-white">Contents</p>
                  </div> -->
            <div
              class="p-4 ml-4 my-4 w-[85%] text-center content-center rounded-sm border border-stroke bg-white py-6 px-7.5 shadow-default dark:border-strokedark dark:bg-boxdark" style="
              box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px,
                rgba(0, 0, 0, 0.22) 0px 15px 12px;
            ">
              <p class="text-black dark:text-white py-2"><span class="font-bold">Ip :</span> 192.168.12.13 </p>
              <p class="text-black dark:text-white py-2"><span class="font-bold">MAC Address :</span> </p>
              <p class="text-black dark:text-white py-2"><span class="font-bold">Location : </span></p>
              <p class="text-black dark:text-white py-2"><span class="font-bold">Temperature : </span></p>
            </div>
          </div>
          <!-- second top -->
          <div class="flex flex-col w-[55%]">
            <!-- graph -->
            <div class="mass-shadow">
            <div class="mt-5 pl-4 rounded-sm border border-stroke bg-white py-3 shadow-default dark:border-strokedark dark:bg-boxdark" id="chart-container" style="width: 100%; height: 350px" ></div>
            </div>

            <div class="my-10 mr-10">
              <p class="font-bold text-black dark:text-white">Summary</p>
              <div
                class="p-10 h-[200px] rounded-sm border border-stroke bg-white py-6 px-7.5 shadow-default dark:border-strokedark dark:bg-boxdark mass-shadow"
              >
                <p class="text-black dark:text-white" id="logEntry">The Performance of the Server is 90%</p>
                <p class="text-black dark:text-white" x-text="logEntry" id="logEntry"></p>
                <!-- <p class="text-white">The Performance of the Server is 90%</p> -->
                <!-- <p class="text-white">The health condition looks good</p> -->
              </div>
            </div>
          </div>
        </div>
        <div
  class="m-10 rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1 mass-shadow">
  <div class="max-w-full overflow-x-auto">
    <table class="w-full table-auto">
      <thead>
        <tr class="bg-gray-2 text-left dark:bg-meta-4">
          <!-- <th class="min-w-[220px] py-4 px-4 font-medium text-black dark:text-white xl:pl-11">
            Log ID
          </th>
          <th class="min-w-[150px] py-4 px-4 font-medium text-black dark:text-white">
            Log Time
          </th> -->
          <th class="min-w-[150px] py-4 px-4 font-medium text-black dark:text-white">
            Timestamp
          </th>
          <th class="min-w-[150px] py-4 px-4 font-medium text-black dark:text-white">
            IP Address
          </th>
          <th class="min-w-[120px] py-4 px-4 font-medium text-black dark:text-white">
            Http Method
          </th>
          <th class="py-4 px-4 font-medium text-black dark:text-white">
            Request URL
          </th>
          <th class="py-4 px-4 font-medium text-black dark:text-white">
            Status Code 
          </th>
        </tr>
      </thead>
      <tbody>
        <tbody class=" dark:bg-boxdark-2" id="logTableBody"></tbody>
    </table>
  </div>
</div>
        <!-- log table -->
        <!-- <div class="bg-indigo-500 h-[40%]">
          <p class="text-white ml-[10%] mt-4 font-black text-5xl">Log table</p> -->

          <!--  -->
          <!-- Search Functionality -->
          <!-- <div class="flex mt-4 text-black bg-black">
                    <label for="searchColumn" class="mr-2">Search By:</label>
                    <select id="searchColumn" class="border border-gray-700 bg-indigo-500  p-2">
                      <option class="text-red" value="search">Drop Down</option>
                      <option class="text-red" value="all">All</option>
                        <option class="text-red" value="log_id">Log ID</option>
                        <option value="log_time">Log Time</option>
                        <option value="timestamp">Timestamp</option>
                        <option value="ip_address">IP Address</option>
                        <option value="http_method">HTTP Method</option>
                        <option value="request_url">Request URL</option>
                        <option value="status_code">Status Code</option>
                    </select>
                    <input type="text" id="search" class="border border-gray-700 p-2 ml-2 text-black" placeholder="Search...">
                </div> -->
          <div x-data="{ items: [], addItem: function() { this.items.push('New Item ' + (this.items.length + 1)); } }"
            x-init="() => {
                Alpine.plugin(window.persist)
                Alpine.persist('items')
              }">
            <!-- Display the list -->
            <ul>
              <template x-for="item in items" :key="item">
                <li x-text="item"></li>
              </template>
            </ul>
  
            <!-- Button to add items -->
            <button x-on:click="addItem">Add Item</button>
          </div>
        </div>
      </main>
      <!-- ===== Main Content End ===== -->
    </div>
    <!-- ===== Content Area End ===== -->
  </div>
  <!-- ===== Page Wrapper End ===== -->

  <script src="./js/components/liveDashboard.js"></script>
  <script>
    const socketer = io('http://localhost:3001');

    // socketer.on('logData', (data) => {
    //   console.log(data);
    // })
    socketer.on('dataFromServer', (data) => {
      // console.log(data);
      if (data && data.value !== undefined) {
        document.getElementById('dataValue').innerText = `${data.value}`;
      }
    });

  </script>
  <!-- <script src="./js/components/logTableScript.js"></script> -->
</body>

</html> 